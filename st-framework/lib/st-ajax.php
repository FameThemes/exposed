<?phpfunction  st_contact_send(){     // Site Info    $errors = array();    $site_name  = get_bloginfo('name');    $to_email = isset($_POST['to_email']) ?  $_POST['to_email'] :  get_option('admin_email');    if(isset($_POST['contact_email'])){    	$contact_name    = $_POST['contact_name'];    	$contact_phone   = $_POST['contact_phone'];    	$contact_email   = $_POST['contact_email'];    	$contact_subject = $_POST['contact_subject'];    	$contact_message = $_POST['contact_message'];    	$subject = "You have a new email from ".$site_name;    	$header  = 'MIME-Version: 1.0' . "\r\n";    	$header .= 'Content-type: text/html; charset=utf-8' . "\r\n";    	$header .= 'From:'.$reservation_email. " \r\n";    	$message = "    	You have a new message! <br />    	Name: $contact_name <br />    	Email:  $contact_email <br />    	Phone Number: $contact_phone <br />    	Subject: $contact_subject <br />    	Message: $contact_message <br />    	";    	$send = false;    	add_filter( 'wp_mail_content_type', 'st_set_html_content_type' );    	// Send Mail    	$send= wp_mail($to_email,$subject,$message,$header);    	if($send===true){    		die('success') ;  		}    	else{    		die('error') ;    	}    }else{    	die('error');    }}function st_ajax_gallery_details(){	$post_id = intval($_REQUEST['galleryID']);	$title =  $date =  $tags =  $desc =''; $images= array();	global $post, $wpdb;	$prev_post_id=  $next_post_id ='';	$post = get_post($post_id);	if($post->ID>0){		setup_postdata($post);		 $title=  get_the_title();		 $term_list = wp_get_post_terms($post->ID, 'gallery_tag', array("fields" => "all"));		 $filter_class=array();		 $tags=  array();		 foreach($term_list as $term){		 	$filter_class[]= $term->slug;		 	$tags[] = $term->name ;		 }		 $tags  = (!empty($tags)) ? join(esc_html(', '),$tags) : '';		 $desc = get_the_content('');		 $date = get_the_date();		 $next_post_id = $wpdb->get_var("			 		SELECT `ID` FROM $wpdb->posts			 		WHERE `post_type` LIKE 'gallery'				 		AND `post_status` LIKE 'publish'			 			AND `ID` > ($post->ID)			 		ORDER BY `ID` ASC  LIMIT 1 		 		");		 $prev_post_id = $wpdb->get_var("			 		SELECT `ID` FROM $wpdb->posts			 		WHERE `post_type` LIKE 'gallery'				 		AND `post_status` LIKE 'publish'				 		AND `ID` < ($post->ID)			 		ORDER BY  `ID` DESC LIMIT 1		 		");		 $image_data = st_get_gallery_images($post->ID);		 if(!count($image_data)){		 	$image_data = array();		 }		 foreach($image_data['images'] as $k => $thumb_id){		 	 $meta=  $image_data['meta'][$k];		 	// for light box		 	$thumb_image_url = wp_get_attachment_image_src($thumb_id,'st_large');		 	$thumb_image_url =  $thumb_image_url[0];		 	$full_image_url = wp_get_attachment_image_src($thumb_id,'full');		 	$full_image_url =  $full_image_url[0];		 	$images[$k]['src'] =$thumb_image_url;		 	$images[$k]['title'] = stripslashes($meta['title']);		 	$images[$k]['src_full'] =$full_image_url;		 }	}	$ajax_gallery =  array(			'desc' =>'                <h2 class="g-title">'.$title.'</h2>                <div class="g-meta">                    <div class="g-meta-date">'.sprintf(__('Date: %s','smooththemes'), $date).'</div>                    <div class="g-meta-cat">'.sprintf(__('Tags: %s','smooththemes'), $tags).'</div>                </div>                <div class="g-desc">'.$desc.'</div>            ',			'next_url'=>'#',			'back_url'=>'#',			'ajax_next'=>'',			'ajax_back'=>'',			'images'=>$images	);	if($next_post_id!=''){		$ajax_gallery['ajax_next'] = 'action=ajax_gallery_details&galleryID='.$next_post_id;	}	if($prev_post_id!=''){		$ajax_gallery['ajax_back'] = 'action=ajax_gallery_details&galleryID='.$prev_post_id;	}	 wp_reset_postdata();     die(json_encode($ajax_gallery));}add_action('wp_ajax_contact_send', 'st_contact_send');add_action('wp_ajax_nopriv_contact_send', 'st_contact_send');add_action('wp_ajax_ajax_gallery_details', 'st_ajax_gallery_details');add_action('wp_ajax_nopriv_ajax_gallery_details', 'st_ajax_gallery_details');